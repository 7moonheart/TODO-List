# TODO List 项目说明文档

## 1. 技术选型
- **编程语言**：Java 21，理由：作为企业级应用开发的主流语言，生态成熟、性能优秀，且有丰富的Spring生态支持。
- **后端框架**：Spring Boot 2.7 + MyBatis，理由：Spring Boot提供快速开发和简化配置，MyBatis提供灵活的SQL控制，比JPA更适合复杂查询场景。
- **前端技术**：原生HTML/CSS/JavaScript，理由：为了最小化依赖和部署复杂度，使用纯原生技术，无需额外构建工具，浏览器直接运行。
- **数据库**：SQLite，理由：轻量级、零配置、单文件数据库，无需独立数据库服务。
- 替代方案对比：
  - **MySQL/PostgreSQL**：需要独立服务，配置复杂，不适合轻量级部署；
  - **H2内存数据库**：重启数据丢失，不适合生产环境；
  - **本地文件存储**：需要自己实现序列化和查询逻辑，开发复杂度高。

## 2. 项目结构设计

### 整体架构
采用经典的MVC架构，前后端分离模式：
- 前端：单页面应用（SPA），纯静态文件
- 后端：RESTful API服务
- 数据层：MyBatis + SQLite

### 目录结构
```
todo/
├── src/main/java/com/todo/
│   ├── TodoApplication.java          # 启动类
│   ├── config/                       # 配置类
│   │   ├── DatabaseInitializer.java  # 数据库初始化
│   │   └── BackupConfig.java         # 备份配置
│   ├── controller/                   # 控制器层
│   │   └── TaskController.java
│   ├── entity/                       # 实体层
│   │   └── Task.java
│   ├── mapper/                       # 数据访问层（MyBatis）
│   │   └── TaskMapper.java
│   └── service/                      # 业务逻辑层
│       └── TaskService.java
├── src/main/resources/
│   ├── application.yml               # 主配置文件
│   └── static/                       # 前端静态资源
│       └── index.html                # 主页面
├── data/                             # 数据库文件（运行时生成）
└── logs/                             # 日志文件（运行时生成）
```

### 模块职责说明
- **Controller层**：处理HTTP请求，参数校验，响应格式化
- **Service层**：业务逻辑处理，事务管理
- **Mapper层**：数据库操作，SQL执行
- **Entity层**：数据模型定义
- **Config层**：应用配置和初始化
- **Static层**：前端界面，纯浏览器端运行

## 3. 需求细节与决策

### 任务字段设计
- **标题（title）**：必填字段，前端和后端双重验证
- **描述（description）**：可选字段，支持多行文本
- **标签（tag）**：固定三个选项（工作/学习/生活），默认"工作"
- **完成状态（completed）**：布尔值，默认false
- **删除标记（deleted）**：软删除，默认false

### UI显示逻辑
- **已完成任务**：文字添加删除线，颜色变灰，透明度降低
- **删除按钮**：保持红色不变，仅透明度变化，避免划线效果
- **任务排序**：默认按创建时间倒序（最新在最上面）

### 筛选功能
1. **状态筛选**：全部/进行中/已完成
2. **标签筛选**：工作/学习/生活/全部
3. **组合筛选**：支持状态和标签同时筛选
4. **搜索功能**：标题和描述关键词搜索

## 4. AI 使用说明
- 使用的AI工具：DeepSeek作为主要开发助手，GitHub Copilot、ChatGPT用于代码补全和快速生成代码片段。
- AI参与环节
	- 架构设计咨询：讨论技术选型和项目结构
	- 代码片段生成：生成Spring Boot配置、MyBatis映射、前端界面等
	- Bug调试：分析错误日志，定位问题原因
	- 文档初稿编写：生成README和项目说明文档初稿
- AI输出的修改与调整
	- 数据层调整：AI最初建议使用JPA，根据项目需求改为MyBatis
	- AI提供的SQLite配置需要手动调整方言和连接配置
	- 前端优化：AI生成的CSS样式经过手动调整，改善视觉效果

## 5. 运行与测试方式

### 本地运行方式
```bash
# 1. 安装依赖（仅需Maven）
# 2. 克隆项目
git clone <repository-url>

# 3. 编译运行
cd todo
mvn clean spring-boot:run

# 4. 访问应用
# 浏览器打开: http://localhost:8080
```

### 测试环境
- **开发环境**：
  - Windows
  - Java 21
  - Maven 3.6+
  - Chrome/Firefox/Safari浏览器

### 已知问题与不足
1. **性能限制**：SQLite在大量并发写入时性能有限（不适合大规模多用户场景）
2. **功能限制**：不支持多用户和权限管理（单用户应用）
3. **数据安全**：未加密的数据库文件，敏感数据需注意存储位置

## 6. 总结与反思

### 如果有更多时间，我会进行的改进
1. **用户系统**：添加用户注册/登录，支持多用户数据隔离
2. **丰富功能**：添加任务优先级、截止日期、提醒功能
3. **性能优化**：添加前端缓存，减少不必要的API调用
4. **国际化**：支持多语言界面
5. **离线增强**：改进PWA支持，提供更好的离线体验
6. **导入导出**：支持从其他TODO应用导入数据

### 这个实现的最大亮点
1. **极简部署**：单JAR包+SQLite文件，零外部依赖，真正实现"开箱即用"
2. **完整功能**：在轻量级架构下实现了完整的TODO应用功能，包括CRUD、筛选、统计
3. **优雅降级**：网络异常时自动使用本地数据，保证基本功能可用
4. **自动备份**：内置数据库备份机制，数据安全有保障
5. **前后端分离**：清晰的架构分离，便于后续扩展和维护
